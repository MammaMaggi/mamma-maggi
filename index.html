<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mammaâ€¯MaggiÂ |Â PedidosÂ Online</title>
<link href="https://fonts.googleapis.com/css2?family=Staatliches&family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
:root{--bg:#111;--fg:#fff;--accent:#e63946;--card:#1a1a1a}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Montserrat',sans-serif;background:var(--bg);color:var(--fg);min-height:100vh;line-height:1.5}
a{color:var(--accent)}button{font-family:inherit;border:none;cursor:pointer}
h1,h2,h3{font-family:'Staatliches',cursive;font-weight:400}
header{display:flex;align-items:center;justify-content:center;gap:.7rem;padding:1rem 1rem 1.2rem;position:relative;text-align:center}
header h1{font-size:2.3rem;letter-spacing:2px}
#loginBtn{position:absolute;left:1rem;top:1rem;background:none;color:var(--fg);font-size:1rem;display:flex;align-items:center;gap:.3rem}
#cartBtn{position:absolute;right:1rem;top:1rem;width:42px;height:42px;border:2px solid var(--fg);border-radius:50%;background:none;color:var(--fg);display:flex;align-items:center;justify-content:center}
#cartBtn span{font-size:.8rem}
#userInfo{font-size:.8rem;opacity:.85}
section{max-width:960px;margin:auto;padding:2rem 1rem}
section h2{text-align:center;font-size:2rem;margin-bottom:1.2rem}
.menu-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.2rem}
.card{background:var(--card);border-radius:8px;padding:1rem;display:flex;flex-direction:column;gap:.6rem}
.price{font-weight:700}
.card button{margin-top:auto;padding:.6rem;border-radius:4px;background:var(--accent);color:#fff;font-weight:700}
.category-title{grid-column:1/-1;margin:1rem 0 .2rem;font-size:1.5rem;text-align:center;text-transform:uppercase;opacity:.9}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .3s}
.modal.active{opacity:1;visibility:visible}
.box{background:var(--card);border-radius:8px;padding:1.4rem;width:92%;max-width:560px;max-height:90vh;overflow-y:auto;display:flex;flex-direction:column;gap:1rem}
.close{align-self:flex-end;color:var(--fg);font-size:1.3rem;cursor:pointer;background:none}
form{display:grid;gap:1rem}
input,textarea{padding:.7rem;border-radius:4px;border:1px solid #333;background:#222;color:var(--fg)}
textarea{resize:vertical}
.btn{padding:.8rem;border-radius:4px;background:var(--accent);color:#fff;font-weight:700}
.cart-item{border-bottom:1px solid #333;padding-bottom:.4rem;margin-bottom:.7rem}
.item-head{display:grid;grid-template-columns:1fr auto auto;align-items:center;gap:.4rem}
.qty{display:flex;align-items:center;gap:.4rem}
.qty button{width:24px;height:24px;border:1px solid var(--fg);background:none;color:var(--fg);border-radius:4px;font-weight:700}
.vegan-opt{font-size:.75rem;display:flex;align-items:center;gap:.3rem;margin-top:.25rem;opacity:.9}
.summary{text-align:right;font-size:1.05rem;font-weight:700}
#map{height:220px;border-radius:6px;margin-top:.5rem;display:none}
</style>
</head>
<body>
<header>
<button id="loginBtn"><span>ðŸ‘¤</span> Ingresar</button>
<h1>MAMMA MAGGI</h1>
<div id="userInfo"></div>
<button id="cartBtn">ðŸ›’ <span id="cartCount">0</span></button>
</header>
<section>
<h2>MenÃº</h2>
<div class="menu-grid" id="menuGrid"></div>
</section>

<!-- Auth Modal -->
<div class="modal" id="authModal"><div class="box">
<button class="close" id="closeAuth">âœ•</button>
<h2 id="authTitle">Inicia SesiÃ³n</h2>
<form id="authForm">
<input type="email" id="email" placeholder="Correo" required />
<input type="password" id="pass" placeholder="ContraseÃ±a" required />
<div id="extra" style="display:none">
<input id="name" placeholder="Nombre" />
<input id="last" placeholder="Apellido" />
<input id="phone" placeholder="TelÃ©fono" />
<input id="addr" placeholder="DirecciÃ³n (Temuco)" />
<button type="button" class="btn" id="geoBtn">Confirmar direcciÃ³n</button>
<p id="distText" style="text-align:center"></p>
<div id="map"></div>
</div>
<button class="btn" id="authSubmit">Entrar</button>
<p id="toggleAuth" style="text-align:center;cursor:pointer;margin-top:.5px">Â¿No tienes cuenta? RegÃ­strate</p>
</form></div></div>

<!-- Cart Modal -->
<div class="modal" id="cartModal"><div class="box">
<button class="close" id="closeCart">âœ•</button>
<h2>Tu Pedido</h2>
<div id="cartItems"></div>
<textarea id="comment" rows="2" placeholder="Comentario para la cocina (opcional)"></textarea>
<div style="margin:.7rem 0"><label><input type="radio" name="delType" value="pickup" checked /> Retiro</label>Â Â <label><input type="radio" name="delType" value="delivery"/> Delivery</label></div>
<div style="margin-top:.5rem"><label>CÃ³digo</label><div style="display:flex;gap:.4rem;margin-top:.3rem"><input id="coupon" style="flex:1"/><button class="btn" id="couponBtn" style="padding:.5rem .8rem">Aplicar</button></div><small id="couponMsg"></small></div>
<div id="ptsBox" style="display:none"><p>Puntos: <span id="pts">0</span></p><label><input type="checkbox" id="redeemChk"/> Usar pts</label></div>
<p class="summary">Subtotal: $<span id="sub">0</span></p>
<p class="summary" id="delRow" style="display:none">Delivery (<span id="km">0</span>Â km): $<span id="del">0</span></p>
<p class="summary" id="discRow" style="display:none">Descuento: â€“$<span id="disc">0</span></p>
<p class="summary" id="redRow" style="display:none">Puntos: â€“$<span id="red">0</span></p>
<p class="summary">Total: $<span id="tot">0</span></p>
<a class="btn" id="checkout" href="#">Finalizar por WhatsApp</a>
</div></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const PIZZAS=[
{id:1,name:'Margarita',desc:'Salsa tomate, mozzarella, albahaca.',price:9990},
{id:2,name:'Pepperoni',desc:'Salsa tomate, mozzarella, pepperoni.',price:10500},
{id:3,name:'Not Fugazza',desc:'Salsa tomate, cebolla, aceitunas.',price:10990},
{id:4,name:'Napolitana',desc:'JamÃ³n, tomate cherry, orÃ©gano.',price:11500},
{id:5,name:'Hawaiana',desc:'JamÃ³n y piÃ±a.',price:11500},
{id:6,name:'Vegetariana',desc:'Aceitunas, champiÃ±Ã³n, pimentÃ³n, cebolla.',price:11990},
{id:7,name:'Pesto Cherry',desc:'Tomate cherry, pesto.',price:11990},
{id:8,name:'Pollo BBQ',desc:'Pollo, tocino y salsa BBQ.',price:12500},
{id:9,name:'Capi',desc:'Pera y queso azul.',price:12500},
{id:10,name:'Pitu',desc:'JamÃ³n serrano, rÃºcula, parmesano.',price:12990},
{id:11,name:'Bernarda',desc:'Queso azul, nueces, miel, ricotta.',price:10990},
{id:12,name:'Bacon No Bacon',desc:'ProteÃ­na de soya sabor tocino & cebolla.',price:10990},
{id:13,name:'Mare Verde',desc:'SalmÃ³n ahumado, rÃºcula, parmesano.',price
